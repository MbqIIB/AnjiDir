<?xml version="1.0" encoding="UTF-8"?><mappingRoot domainID="com.ibm.msl.mapping.xml" domainIDExtension="mb" mainMap="true" targetNamespace="default" version="8.0.4.0" xmlns="http://www.ibm.com/2008/ccl/Mapping" xmlns:map="default">
    <input path="/AccountOpeningByPartnerService_InlineSchema1.xsd" var="var"/>
    <input path="db:database(/finacle.dbm,FINACLE,db:schema-tables(CUSTOM,GCT))" var="FINACLE"/>
    <output path="/gefuRecordFomat.xsd"/>
    <imports>
        <import kind="esql" namespace="/helper.esql"/>
    </imports>
    <namespaces>
        <namespace kind="extension" prefix="helper" uri="/helper.esql"/>
    </namespaces>
    <generation engine="xquery"/>
    <mappingDeclaration name="openRetailLoanAccount_Mapping">
        <input namespace="http://AccountOpeningByPartnerService" path="$var/mb:msg(openRetailLoanAccount,assembly,XMLNSC,Properties)" var="MessageAssembly"/>
        <input path="$FINACLE/db:select(fn:false(),ResultSet(CUSTOM/GCT/DC_CLS_DATE),db:where('1=1'))" var="dbselect"/>
        <output namespace="http://www.quantiguous.com/dfdl/gefuRecordFormat.xsd" path="mb:msg(gefuRecordFormat,assembly,DFDL,Properties)"/>
        <move>
            <input path="$MessageAssembly/Properties"/>
            <output path="Properties"/>
        </move>
        <local>
            <input path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/customer"/>
            <output path="gefuRecordFormat/record/retailCustomer"/>
            <move>
                <input path="gender"/>
                <output path="gender"/>
            </move>
            <move>
                <input path="title"/>
                <output path="title"/>
            </move>
            <move>
                <input path="firstName"/>
                <output path="firstName"/>
            </move>
            <move>
                <input path="middleName"/>
                <output path="middleName"/>
            </move>
            <move>
                <input path="lastName"/>
                <output path="lastName"/>
            </move>
            <move>
                <input path="shortName"/>
                <output path="shortName"/>
            </move>
            <move>
                <input path="channelRequestName"/>
                <output path="channelRequestName"/>
            </move>
            <move>
                <input path="dateOfBirth"/>
                <output path="dateOfBirth"/>
            </move>
            <move>
                <input path="staffIndicator"/>
                <output path="staffIndicator"/>
            </move>
            <move>
                <input path="staffId"/>
                <output path="staffId"/>
            </move>
            <move>
                <input path="motherMaidenName"/>
                <output path="motherMaidenName"/>
            </move>
            <move>
                <input path="segment"/>
                <output path="segment"/>
            </move>
            <move>
                <input path="subSegment"/>
                <output path="subSegment"/>
            </move>
            <move>
                <input path="community"/>
                <output path="community"/>
            </move>
            <move>
                <input path="creditBureauScore"/>
                <output path="creditBureauScore"/>
            </move>
            <move>
                <input path="constitutionCode"/>
                <output path="constitutionCode"/>
            </move>
            <move>
                <input path="primaryRMID"/>
                <output path="primaryRmID"/>
            </move>
            <move>
                <input path="relationshipStartDate"/>
                <output path="relationshipStartDate"/>
            </move>
            <move>
                <input path="nationality"/>
                <output path="nationality"/>
            </move>
            <move>
                <input path="maritalStatus"/>
                <output path="maritalStatus"/>
            </move>
            <move>
                <input path="qualification"/>
                <output path="qualification"/>
            </move>
            <move>
                <input path="sourceOfIncome"/>
                <output path="sourceOfIncome"/>
            </move>
            <move>
                <input path="occupation"/>
                <output path="occupation"/>
            </move>
            <move>
                <input path="industryType"/>
                <output path="industryType"/>
            </move>
            <move>
                <input path="grossIncome"/>
                <output path="grossIncome"/>
            </move>
            <move>
                <input path="totalHouseholdIncome"/>
                <output path="totalHouseHoldIncome"/>
            </move>
            <move>
                <input path="monthlyDisposableIncome"/>
                <output path="monthlyDisposableIncome"/>
            </move>
            <move>
                <input path="bsrTypeOfOrganisation"/>
                <output path="barTypeOfOrganisation"/>
            </move>
            <move>
                <input path="dsaId"/>
                <output path="dsaID"/>
            </move>
            <move>
                <input path="minorityCommunity"/>
                <output path="minorityCommunity"/>
            </move>
            <move>
                <input path="pan"/>
                <output path="panNumber"/>
            </move>
            <move>
                <input path="scSt"/>
                <output path="scSt"/>
            </move>
            <move>
                <input path="sourcingID"/>
                <output path="sourcingID"/>
            </move>
            <move>
                <input path="specialCategory"/>
                <output path="specialCategory"/>
            </move>
            <move>
                <input path="employmentDetails/ifSalariedTypeOfCompany"/>
                <output path="ifSalariedTypeOfCompany"/>
            </move>
            <move>
                <input path="employmentDetails/employmentStatus"/>
                <output path="employmentStatus"/>
            </move>
            <move>
                <input path="employmentDetails/employmentType"/>
                <output path="employmentType"/>
            </move>
            <move>
                <input path="employmentDetails/employerName"/>
                <output path="employerName"/>
            </move>
            <move>
                <input path="employmentDetails/employerID"/>
                <output path="employerID"/>
            </move>
            <move>
                <input path="employmentDetails/employeeID"/>
                <output path="employeeID"/>
            </move>
            <move>
                <input path="employmentDetails/designation"/>
                <output path="employeeDesignation"/>
            </move>
            <assign value="false">
                <output path="minorIndicator"/>
            </assign>
            <assign value="false">
                <output path="nonResidentIndicator"/>
            </assign>
            <assign value="T001">
                <output path="customerType"/>
            </assign>
            <assign value="ACTVE">
                <output path="customerStatus"/>
            </assign>
            <assign value="false">
                <output path="availedTradeService"/>
            </assign>
            <assign value="S">
                <output path="assetClassificationControl"/>
            </assign>
            <assign value="false">
                <output path="customerLevelProvisioning"/>
            </assign>
            <assign value="00">
                <output path="preferredCalendar"/>
            </assign>
            <assign value="INR">
                <output path="baseCcy"/>
            </assign>
            <assign value="N">
                <output path="purgeAllowed"/>
            </assign>
            <assign value="N">
                <output path="delinquentCustomer"/>
            </assign>
            <assign value="en_US">
                <output path="preferredLocale"/>
            </assign>
            <assign value="false">
                <output path="enableEBanking"/>
            </assign>
            <assign value="false">
                <output path="smsBanking"/>
            </assign>
            <assign value="INFENG">
                <output path="nativeLanguageCode"/>
            </assign>
            <assign value="USA (English)">
                <output path="preferredNativeLanguage"/>
            </assign>
            <assign value="true">
                <output path="filedTaxReturnRegularly"/>
            </assign>
            <assign value="1307">
                <output path="businessSigment"/>
            </assign>
            <assign value="false">
                <output path="atmCard"/>
            </assign>
            <assign value="false">
                <output path="doNotCall"/>
            </assign>
            <assign value="false">
                <output path="doorstepBanking"/>
            </assign>
            <assign value="false">
                <output path="internetBanking"/>
            </assign>
            <assign value="2002-01-01">
                <output path="kycRemediationDate"/>
            </assign>
            <assign value="false">
                <output path="mobileBanking"/>
            </assign>
            <assign value="U">
                <output path="panValidationField"/>
            </assign>
            <assign value="false">
                <output path="phoneBanking"/>
            </assign>
            <assign value="false">
                <output path="tabletBanking"/>
            </assign>
            <assign value="WEAK_SEC 16">
                <output path="weakerSections"/>
            </assign>
            <assign value="C001">
                <output path="capacityOfEntry"/>
            </assign>
            <assign value="01">
                <output path="healthCode"/>
            </assign>
            <assign value="false">
                <output path="wapBanking"/>
            </assign>
            <assign value="INR">
                <output path="ccy"/>
            </assign>
            <assign value="2002-01-01">
                <output path="preferentialExpiryDate"/>
            </assign>
            <assign value="DOCUMENT1">
                <output path="document1"/>
            </assign>
            <assign value="INDIVIDUAL KYC DOCUMENTS">
                <output path="documentType1"/>
            </assign>
            <assign value="INDIVIDUAL KYC DOCUMENTS">
                <output path="documentTypeDesc1"/>
            </assign>
            <assign value="true">
                <output path="isDocumentVerified1"/>
            </assign>
            <assign value="true">
                <output path="prefferredFlag1"/>
            </assign>
            <assign value="DOCUMENT2">
                <output path="document2"/>
            </assign>
            <assign value="DOCUMENT3">
                <output path="document3"/>
            </assign>
            <assign value="ADDRESS1">
                <output path="address1"/>
            </assign>
            <assign value="FREE_TEXT_FORMAT">
                <output path="addressFormat1"/>
            </assign>
            <assign value="IN">
                <output path="country1"/>
            </assign>
            <assign value="2099-01-01">
                <output path="addressValidTill1"/>
            </assign>
            <assign value="2002-01-01">
                <output path="lastUpdatedDate1"/>
            </assign>
            <assign value="false">
                <output path="holdMailIndicator1"/>
            </assign>
            <assign value="true">
                <output path="preferredFlagAddress1"/>
            </assign>
            <assign value="ADDRESS2">
                <output path="address2"/>
            </assign>
            <function ref="concat">
                <input path="firstName" var="firstName2"/>
                <input path="middleName" var="middleName2"/>
                <input path="lastName" var="lastName2"/>
                <output path="fullName"/>
                <param name="input" value="($firstName2,$middleName2,$lastName2)"/>
                <property key="defaultDelimiter" value=" "/>
            </function>
            <move>
                <input path="branchID"/>
                <output path="primarySolID"/>
            </move>
            <move>
                <input path="employmentDetails/employerPhoneNumber/phoneNo"/>
                <output path="employerPhoneNumber"/>
            </move>
        </local>
        <local>
            <input path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/loanAccount" var="loanAccount"/>
            <input auxiliary="true" path="$dbselect/ResultSet[1]/CUSTOM/GCT/DC_CLS_DATE" var="DCCLSDATE3"/>
            <input auxiliary="true" path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/customer/branchID" var="branchID"/>
            <input auxiliary="true" path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/customer/employmentDetails" var="employmentDetails"/>
            <input auxiliary="true" path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/customer/firstName" var="firstName1"/>
            <input auxiliary="true" path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/customer/middleName" var="middleName1"/>
            <input auxiliary="true" path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/customer/lastName" var="lastName1"/>
            <input auxiliary="true" path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/loanDisbursal/disbursalMode" var="disbursalMode"/>
            <output path="gefuRecordFormat/record/loanAccount"/>
            <move>
                <input path="$loanAccount/schemeCode"/>
                <output path="schemeCode"/>
            </move>
            <move>
                <input path="$loanAccount/accountManagerUserID"/>
                <output path="accountManagerUserId"/>
            </move>
            <move>
                <input path="$loanAccount/sanctionLimit"/>
                <output path="sanctionLimit"/>
            </move>
            <move>
                <input path="$loanAccount/limitSanctionDate"/>
                <output path="limitSanctionDate"/>
            </move>
            <move>
                <input path="$loanAccount/sanctionLevelCode"/>
                <output path="sanctionLevelCode"/>
            </move>
            <move>
                <input path="$loanAccount/sanctionReferenceNo"/>
                <output path="sanctionReferenceNo"/>
            </move>
            <move>
                <input path="$loanAccount/loanAmount"/>
                <output path="loanAmount"/>
            </move>
            <move>
                <input path="$loanAccount/loanPeriodInMonths"/>
                <output path="loanPeriodMonths"/>
            </move>
            <move>
                <input path="$loanAccount/occupationCode"/>
                <output path="occupationCode"/>
            </move>
            <move>
                <input path="$loanAccount/advanceType"/>
                <output path="advanceType"/>
            </move>
            <move>
                <input path="$loanAccount/purposeOfLoan"/>
                <output path="purposeofAdvance"/>
            </move>
            <move>
                <input path="$loanAccount/riskCategory"/>
                <output path="freeCode8"/>
            </move>
            <move>
                <input path="$branchID/." var="branchID"/>
                <output path="solId"/>
            </move>
            <assign value="F">
                <output path="reprisingPlan"/>
            </assign>
            <assign value="N">
                <output path="repayMethod"/>
            </assign>
            <move>
                <input path="$DCCLSDATE3/." var="DCCLSDATE3"/>
                <output path="accountOpenDate"/>
            </move>
            <assign value="{CIFID}">
                <output path="cifId"/>
            </assign>
            <assign value="1">
                <output path="modeOfOperation"/>
            </assign>
            <move>
                <input path="$employmentDetails/employeeID"/>
                <output path="employeeId"/>
            </move>
            <function ref="concat">
                <input path="$firstName1/." var="firstName"/>
                <input path="$middleName1/." var="middleName"/>
                <input path="$lastName1/." var="lastName"/>
                <output path="employeeName"/>
                <param name="input" value="($firstName,$middleName,$lastName)"/>
                <property key="defaultDelimiter" value=" "/>
            </function>
            <assign value="N">
                <output path="accountStatement"/>
            </assign>
            <move>
                <input path="$DCCLSDATE3/." var="DCCLSDATE3"/>
                <output path="applicableDate"/>
            </move>
            <customFunction lang="esql" ref="helper:getLastInstallmentDate">
                <input path="$DCCLSDATE3/." var="DCCLSDATE3"/>
                <input path="$loanAccount/loanPeriodInMonths" var="loanPeriodInMonths"/>
                <output path="expiryDate"/>
                <param name="piDate" value="$DCCLSDATE3"/>
                <param name="piMonths" value="$loanPeriodInMonths"/>
            </customFunction>
            <assign value="E">
                <output path="drawingPowerIndicator"/>
            </assign>
            <assign value="0.0">
                <output path="drawingPowerPercentage"/>
            </assign>
            <move>
                <input path="$loanAccount/sanctionLevelCode"/>
                <output path="sanctionAuthorisationCode"/>
            </move>
            <move>
                <input path="$DCCLSDATE3/." var="DCCLSDATE3"/>
                <output path="documentDate"/>
            </move>
            <assign value="01">
                <output path="customerHealthCode"/>
            </assign>
            <assign value="1">
                <output path="loanPeriodDays"/>
            </assign>
            <customFunction lang="esql" ref="helper:getFlowStartDate">
                <input path="$DCCLSDATE3/." var="DCCLSDATE3"/>
                <output path="flowStartDate"/>
                <param name="piDate" value="$DCCLSDATE3"/>
            </customFunction>
            <customFunction lang="esql" ref="helper:getFlowStartDate">
                <input path="$DCCLSDATE3/." var="DCCLSDATE3"/>
                <output path="nextDemandDate"/>
                <param name="piDate" value="$DCCLSDATE3"/>
            </customFunction>
            <customFunction lang="esql" ref="helper:getFlowStartDate">
                <input path="$DCCLSDATE3/." var="DCCLSDATE3"/>
                <output path="nextInterestRunDate"/>
                <param name="piDate" value="$DCCLSDATE3"/>
            </customFunction>
            <move>
                <input path="$disbursalMode/."/>
                <output path="modeOfAdvance"/>
            </move>
            <assign value="1307">
                <output path="freeText10"/>
            </assign>
            <assign value="true">
                <output path="eiSchemeFlag"/>
            </assign>
        </local>
        <local>
            <input path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/loanRepayment" var="loanRepayment"/>
            <input auxiliary="true" path="$dbselect/ResultSet[1]/CUSTOM/GCT/DC_CLS_DATE" var="DCCLSDATE"/>
            <output path="gefuRecordFormat/record/loanRepayment"/>
            <foreach>
                <input path="$loanRepayment/repaymentRecord" var="repaymentRecord"/>
                <input auxiliary="true" path="$DCCLSDATE/." var="DCCLSDATE2"/>
                <output path="repayments/repayment"/>
                <move>
                    <input path="$repaymentRecord/flowID"/>
                    <output path="flowId"/>
                </move>
                <move>
                    <input path="$repaymentRecord/repaymentFrequency"/>
                    <output path="eiFrequencyType"/>
                </move>
                <move>
                    <input path="$repaymentRecord/repaymentFrequency"/>
                    <output path="interestFrequencyType"/>
                </move>
                <move>
                    <input path="$repaymentRecord/installmentAmount"/>
                    <output path="flowAmount"/>
                </move>
                <move>
                    <input path="$repaymentRecord/noOfInstallments"/>
                    <output path="noOfDemands"/>
                </move>
                <assign value="N">
                    <output path="eiFrequencyHolidayState"/>
                </assign>
                <assign value="N">
                    <output path="interestFrequencyHolidayState"/>
                </assign>
                <customFunction lang="esql" ref="helper:getFlowStartDate">
                    <input path="$DCCLSDATE2/." var="DCCLSDATE2"/>
                    <output path="flowStartDate"/>
                    <param name="piDate" value="$DCCLSDATE2"/>
                </customFunction>
                <customFunction lang="esql" ref="helper:getFlowStartDate">
                    <input path="$DCCLSDATE2/." var="DCCLSDATE2"/>
                    <output path="nextDemandDate"/>
                    <param name="piDate" value="$DCCLSDATE2"/>
                </customFunction>
                <customFunction lang="esql" ref="helper:getFlowStartDate">
                    <input path="$DCCLSDATE2/." var="DCCLSDATE2"/>
                    <output path="nextInterestDemandDate"/>
                    <param name="piDate" value="$DCCLSDATE2"/>
                </customFunction>
                <customFunction lang="esql" ref="helper:getDayOfDate">
                    <input path="$DCCLSDATE2/." var="DCCLSDATE2"/>
                    <output path="eiFrequencyStartDate"/>
                    <param name="piDate" value="$DCCLSDATE2"/>
                </customFunction>
                <customFunction lang="esql" ref="helper:getDayOfDate">
                    <input path="$DCCLSDATE2/." var="DCCLSDATE2"/>
                    <output path="interestFrequencyStartDate"/>
                    <param name="piDate" value="$DCCLSDATE2"/>
                </customFunction>
            </foreach>
            <assign value="{LOANIURNO}">
                <output path="loan/loanIURNumber"/>
            </assign>
        </local>
        <local>
            <input path="$MessageAssembly/openRetailLoanAccount/openRetailLoanAccountParameters/loanDisbursal" var="loanDisbursal"/>
            <input auxiliary="true" path="$dbselect/ResultSet[1]/CUSTOM/GCT/DC_CLS_DATE" var="DCCLSDATE1"/>
            <output path="gefuRecordFormat/record/loanDisbursement"/>
            <move>
                <input path="$DCCLSDATE1/."/>
                <output path="disbursement/valueDate"/>
            </move>
            <move>
                <input path="$loanDisbursal/netDisbursementAmount"/>
                <output path="disbursement/disbursementAmount"/>
            </move>
            <move>
                <input path="$loanDisbursal/creditAccountNumber"/>
                <output path="disbursement/creditAccountNumber"/>
            </move>
            <foreach>
                <input path="$loanDisbursal/charges" var="charges"/>
                <output path="charges"/>
                <move>
                    <input path="$charges/chargeEventTpe"/>
                    <output path="chargeEventType"/>
                </move>
                <move>
                    <input path="$charges/chargeAmount"/>
                    <output path="chargeAmount"/>
                </move>
                <assign value="true">
                    <output path="selectFlag"/>
                </assign>
                <expression>
                    <output path="serialNumber"/>
                    <code lang="xpath">$charges-index</code>
                </expression>
                <expression>
                    <output path="recordInitiator"/>
                    <code lang="xpath">fn:concat('rec',fn:string($charges-index))</code>
                </expression>
            </foreach>
            <assign value="{LOANAC}">
                <output path="disbursement/loanAccountNumber"/>
            </assign>
            <assign value="T">
                <output path="disbursement/transactionType"/>
            </assign>
            <assign value="N">
                <output path="disbursement/disbursementType"/>
            </assign>
            <assign value="false">
                <output path="disbursement/deductOverdueDemand"/>
            </assign>
            <assign value="true">
                <output path="disbursement/finalDisbursement"/>
            </assign>
        </local>
    </mappingDeclaration>
</mappingRoot>