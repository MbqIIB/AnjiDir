<?xml version="1.0" encoding="UTF-8"?><mappingRoot domainID="com.ibm.msl.mapping.xml" domainIDExtension="mb" mainMap="true" targetNamespace="default" version="8.0.4.0" xmlns="http://www.ibm.com/2008/ccl/Mapping" xmlns:map="default">
    <input path="/customer-key.xsd" var="var"/>
    <input path="db:database(/finesb.dbm,FINESB,db:schema-tables(dbo,CUSTOMER_ACCOUNTS))" var="finesb"/>
    <output path="/customer-account.xsd" var="var1"/>
    <namespaces>
        <namespace kind="extension" prefix="fn" uri="http://www.w3.org/2005/xpath-functions"/>
    </namespaces>
    <generation engine="xquery"/>
    <mappingDeclaration name="fetchAccountDetails_From_Ganaseva">
        <input path="$var/mb:msg(customer-key,assembly,XMLNSC,Properties)" var="MessageAssembly"/>
        <input path="$finesb/db:select(fn:false(),ResultSet(dbo/CUSTOMER_ACCOUNTS/ACCOUNT_NUMBER,dbo/CUSTOMER_ACCOUNTS/NAME,dbo/CUSTOMER_ACCOUNTS/CIF_ID,dbo/CUSTOMER_ACCOUNTS/EMAIL_ID,dbo/CUSTOMER_ACCOUNTS/MOBILE_NO,dbo/CUSTOMER_ACCOUNTS/SEGMENT,dbo/CUSTOMER_ACCOUNTS/RM_ID,dbo/CUSTOMER_ACCOUNTS/ACCOUNT_BASE_SOL,dbo/CUSTOMER_ACCOUNTS/ACCOUNT_SOL_DESCRIPTION,dbo/CUSTOMER_ACCOUNTS/ADDRESS,dbo/CUSTOMER_ACCOUNTS/CITY,dbo/CUSTOMER_ACCOUNTS/STATE,dbo/CUSTOMER_ACCOUNTS/COUNTRY,dbo/CUSTOMER_ACCOUNTS/PIN,dbo/CUSTOMER_ACCOUNTS/SCHM_CODE,dbo/CUSTOMER_ACCOUNTS/SCHEME_DESCRIPTION),db:where('dbo.CUSTOMER_ACCOUNTS.ACCOUNT_NUMBER =  ?','?'=$MessageAssembly/customer-key/account-number))" var="dbselect"/>
        <output path="$var1/mb:msg(customer-account,assembly,XMLNSC,Properties,LocalEnvironment)" var="MessageAssembly1"/>
        <select ref="dbselect">
            <input path="$dbselect/ResultSet"/>
            <output path="$MessageAssembly1/customer-account" var="customer-account1"/>
            <output path="$MessageAssembly1/LocalEnvironment" var="LocalEnvironment2"/>
            <condition>
                <if>
                    <input path="." var="ResultSet"/>
                    <output path="$customer-account1/."/>
                    <test lang="xpath">fn:exists( $ResultSet)</test>
                    <foreach>
                        <input path="$ResultSet/." var="ResultSet1"/>
                        <output path="."/>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/ACCOUNT_NUMBER" var="ACCOUNTNUMBER1"/>
                            <output path="account-number"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/NAME" var="NAME"/>
                            <output path="name"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/CIF_ID" var="CIFID"/>
                            <output path="cif-id"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/EMAIL_ID" var="EMAILID"/>
                            <output path="email-id"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/MOBILE_NO" var="MOBILENO"/>
                            <output path="mobile-no"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/SEGMENT" var="SEGMENT"/>
                            <output path="segment"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/RM_ID" var="RMID"/>
                            <output path="rm-id"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/ACCOUNT_BASE_SOL" var="ACCOUNTBASESOL"/>
                            <output path="account-base-sol"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/ACCOUNT_SOL_DESCRIPTION" var="ACCOUNTSOLDESCRIPTION"/>
                            <output path="account-sol-description"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/ADDRESS" var="ADDRESS"/>
                            <output path="address"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/CITY" var="CITY"/>
                            <output path="city"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/STATE" var="STATE"/>
                            <output path="state"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/COUNTRY" var="COUNTRY"/>
                            <output path="country"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/PIN" var="PIN"/>
                            <output path="pin"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/SCHM_CODE" var="SCHMCODE"/>
                            <output path="schm-code"/>
                        </move>
                        <move>
                            <input path="$ResultSet1/dbo/CUSTOMER_ACCOUNTS/SCHEME_DESCRIPTION" var="SCHEMEDESCRIPTION"/>
                            <output path="scheme-description"/>
                        </move>
                    </foreach>
                </if>
                <else>
                    <output path="$LocalEnvironment2/."/>
                    <assign value="404">
                        <output path="Destination/HTTP/ReplyStatusCode"/>
                        <test lang="xpath">404</test>
                    </assign>
                </else>
            </condition>
        </select>
        <move>
            <input path="$MessageAssembly/Properties"/>
            <output path="$MessageAssembly1/Properties"/>
        </move>
    </mappingDeclaration>
</mappingRoot>
